<!-- apps/learning_content/templates/learning_content/material_node_form.html -->

{% extends "base.html" %}
{% load widget_tweaks %}
{% block content %}
<h2 class="mb-4">学習項目追加: {{ material.title }}</h2>

<form method="post" class="mb-3">
    {% csrf_token %}

    {# 非フィールドエラーの表示 #}
    {% if form.non_field_errors %}
        <div class="alert alert-danger">
            {% for error in form.non_field_errors %}
                <div>{{ error }}</div>
            {% endfor %}
        </div>
    {% endif %}

    {% for field in form %}
        <div class="mt-3 mb-4"> {# 上下の余白をそれぞれ調整 #}
            <label class="form-label d-flex justify-content-between align-items-center">
                <span>{{ field.label }}</span>
                {% if field.help_text %}
                    <small class="text-muted ms-2">{{ field.help_text }}</small>
                {% endif %}
                {% for error in field.errors %}
                    <span class="text-danger ms-2">{{ error }}</span>
                {% endfor %}
            </label>
            {{ field|add_class:"form-control bg-light" }}
        </div>
    {% endfor %}

    <button type="submit" class="btn btn-primary">追加</button>
    <a href="{% url 'learning_content:material_detail' material.pk %}" class="btn btn-secondary ms-2">戻る</a>
</form>
{% endblock %}
